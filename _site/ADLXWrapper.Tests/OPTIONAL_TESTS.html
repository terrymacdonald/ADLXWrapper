<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Optional Test Categories in ADLXWrapper.Tests | ADLXWrapper </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Optional Test Categories in ADLXWrapper.Tests | ADLXWrapper ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/terrymacdonald/ADLXWrapper/blob/feature-api-overhaul/ADLXWrapper.Tests/OPTIONAL_TESTS.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="ADLXWrapper">
            ADLXWrapper
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="optional-test-categories-in-adlxwrappertests">Optional Test Categories in ADLXWrapper.Tests</h1>

<h2 id="overview">Overview</h2>
<p>Some tests in the ADLXWrapper test suite can <strong>modify your system configuration</strong>. These tests are marked with special category traits and are <strong>excluded from normal test runs</strong> by default.</p>
<h2 id="createeyefinity-category">CreateEyefinity Category</h2>
<h3 id="what-it-does">What It Does</h3>
<p>Tests in the <code>CreateEyefinity</code> category will:</p>
<ul>
<li>Create an AMD Eyefinity desktop (combining multiple displays into one large surface)</li>
<li>Verify the creation was successful</li>
<li>Destroy the Eyefinity desktop</li>
<li>Verify restoration to the original state</li>
</ul>
<h3 id="-warnings">?? Warnings</h3>
<ul>
<li>Your displays will <strong>temporarily reconfigure</strong> (may go black for 2-5 seconds)</li>
<li>Open windows <strong>may be repositioned</strong></li>
<li>Requires <strong>2 or more compatible displays</strong> connected to AMD GPU</li>
<li>Not recommended while running fullscreen applications</li>
</ul>
<h3 id="requirements">Requirements</h3>
<p>? <strong>Required:</strong></p>
<ul>
<li>AMD Radeon GPU (RX 5000 series or newer recommended)</li>
<li>2 or more displays connected</li>
<li>AMD Adrenalin drivers 21.10.1 or newer</li>
</ul>
<p>? <strong>Recommended:</strong></p>
<ul>
<li>Displays with matching resolution and refresh rate</li>
<li>No fullscreen applications running</li>
<li>Save your work before running these tests</li>
</ul>
<h3 id="how-to-run">How to Run</h3>
<h4 id="command-line">Command Line</h4>
<pre><code class="lang-bash"># Navigate to test project
cd ADLXWrapper.Tests

# Run ONLY CreateEyefinity tests
dotnet test --filter &quot;Category=CreateEyefinity&quot;

# Run with detailed output (recommended)
dotnet test --filter &quot;Category=CreateEyefinity&quot; --verbosity detailed

# Run all tests EXCEPT CreateEyefinity (default)
dotnet test --filter &quot;Category!=CreateEyefinity&quot;
</code></pre>
<h4 id="visual-studio">Visual Studio</h4>
<ol>
<li>Open <strong>Test Explorer</strong> (<code>Test</code> ? <code>Test Explorer</code>)</li>
<li>Find test: <code>DesktopTests</code> ? <code>Optional_Test_Eyefinity_Create_And_Restore</code></li>
<li><strong>Right-click</strong> on the test</li>
<li>Select <strong>Run</strong> or <strong>Debug</strong></li>
<li>Watch the <strong>Output</strong> window for detailed status messages</li>
</ol>
<h4 id="visual-studio-code">Visual Studio Code</h4>
<pre><code class="lang-bash"># In terminal
dotnet test --filter &quot;Category=CreateEyefinity&quot; --logger &quot;console;verbosity=detailed&quot;
</code></pre>
<h3 id="test-output-example">Test Output Example</h3>
<pre><code>================================================================================
??  WARNING: EYEFINITY CREATE/RESTORE TEST
================================================================================
This test will MODIFY your desktop configuration!
- Your displays will reconfigure (may go black briefly)
- Open windows may be repositioned
- The test will restore your original configuration when complete
================================================================================

Step 1: Checking Eyefinity support...
? Eyefinity is supported

Step 2: Checking current Eyefinity state...
Original Eyefinity state: Disabled

Step 3: Creating Eyefinity desktop...
??  Your displays will reconfigure now...
? Eyefinity desktop created successfully
? Verified: Eyefinity is now enabled

Step 4: Restoring original desktop configuration...
??  Your displays will reconfigure again...
? Eyefinity desktop destroyed successfully
? Verified: Eyefinity is now disabled
? Original desktop configuration restored

================================================================================
? TEST COMPLETED SUCCESSFULLY
  Your desktop configuration should be restored to its original state
================================================================================
</code></pre>
<h3 id="safety-features">Safety Features</h3>
<p>The test includes several safety features:</p>
<ol>
<li><p><strong>Pre-flight Checks</strong>:</p>
<ul>
<li>Verifies Eyefinity is supported</li>
<li>Checks minimum display count</li>
<li>Saves current Eyefinity state</li>
</ul>
</li>
<li><p><strong>State Restoration</strong>:</p>
<ul>
<li>Automatically restores original state after test</li>
<li>Includes emergency restoration on failure</li>
<li>Provides clear instructions if restoration fails</li>
</ul>
</li>
<li><p><strong>Clear Warnings</strong>:</p>
<ul>
<li>Displays warnings before modifying configuration</li>
<li>Shows status at each step</li>
<li>Logs detailed error information</li>
</ul>
</li>
<li><p><strong>Skip Conditions</strong>:</p>
<ul>
<li>Skips if Eyefinity not supported</li>
<li>Skips if less than 2 displays</li>
<li>Skips if already enabled (preserves user config)</li>
</ul>
</li>
</ol>
<h3 id="what-if-something-goes-wrong">What If Something Goes Wrong?</h3>
<p>If the test fails and doesn't restore your configuration:</p>
<ol>
<li><strong>Check test output</strong> for error messages</li>
<li><strong>Manually disable Eyefinity</strong>:
<ul>
<li>Open AMD Software (right-click on desktop)</li>
<li>Go to <code>Display</code> ? <code>Eyefinity</code></li>
<li>Click <code>Disable Eyefinity</code></li>
</ul>
</li>
<li><strong>Restart your system</strong> if displays don't restore</li>
</ol>
<p>The test includes emergency restoration code, but manual intervention may be needed in rare cases.</p>
<h3 id="adding-more-optional-tests">Adding More Optional Tests</h3>
<p>To add more tests that modify system configuration:</p>
<ol>
<li>Choose an appropriate category name (e.g., <code>CreateVirtualDisplay</code>, <code>ModifyOverclock</code>)</li>
<li>Add the <code>[Trait(&quot;Category&quot;, &quot;YourCategory&quot;)]</code> attribute</li>
<li>Add <code>[Trait(&quot;Category&quot;, &quot;Integration&quot;)]</code> for visibility</li>
<li>Include clear warnings in test output</li>
<li>Document the category in this file</li>
<li>Update test README.md</li>
</ol>
<p>Example:</p>
<pre><code class="lang-csharp">[Trait(&quot;Category&quot;, &quot;ModifyOverclock&quot;)]
[Trait(&quot;Category&quot;, &quot;Integration&quot;)]
[SkippableFact]
public void Optional_Test_Apply_Overclock_Settings()
{
    _output.WriteLine(&quot;??  WARNING: This test will modify GPU settings!&quot;);
    // Test implementation...
}
</code></pre>
<h3 id="cicd-integration">CI/CD Integration</h3>
<p>In CI/CD pipelines:</p>
<pre><code class="lang-yaml"># .github/workflows/test.yml
- name: Run Tests (Exclude Optional)
  run: dotnet test --filter &quot;Category!=CreateEyefinity&quot;

# Optional: Run CreateEyefinity tests on dedicated hardware
- name: Run CreateEyefinity Tests
  if: matrix.os == 'windows-amd-multi-display'
  run: dotnet test --filter &quot;Category=CreateEyefinity&quot;
</code></pre>
<h2 id="summary">Summary</h2>
<table>
<thead>
<tr>
<th>Category</th>
<th>Purpose</th>
<th>Risk Level</th>
<th>Default Run</th>
</tr>
</thead>
<tbody>
<tr>
<td>None</td>
<td>Standard read-only tests</td>
<td>None</td>
<td>? Yes</td>
</tr>
<tr>
<td><code>CreateEyefinity</code></td>
<td>Create/destroy Eyefinity desktops</td>
<td>Medium</td>
<td>? No</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>Always save your work and close fullscreen applications before running optional tests that modify system configuration.</strong></p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/terrymacdonald/ADLXWrapper/blob/feature-api-overhaul/ADLXWrapper.Tests/OPTIONAL_TESTS.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
